<!DOCTYPE html>
<html>
<head>
	<title>CDS Dashboard</title>
	<style>
		body {
			background-color: #f2f2f2;
			font-family: Arial, Helvetica, sans-serif;
		}
		.container {
			margin: 0 auto;
			max-width: 800px;
			padding: 20px;
			background-color: #fff;
			box-shadow: 0 0 10px #999;
			border-radius: 10px;
			text-align: center;
		}
		button {
			background-color: #4CAF50;
			color: white;
			padding: 12px 20px;
			border: none;
			border-radius: 4px;
			cursor: pointer;
			margin-right: 10px;
			font-size: 16px;
		}
		button:hover {
			background-color: #3e8e41;
		}
		input[type=text] {
			width: 100%;
			padding: 12px 20px;
			margin: 8px 0;
			box-sizing: border-box;
			border: 2px solid #ccc;
			border-radius: 4px;
			font-size: 16px;
		}
		input[type=submit] {
			background-color: #4CAF50;
			color: white;
			padding: 12px 20px;
			border: none;
			border-radius: 4px;
			cursor: pointer;
			font-size: 16px;
		}
		input[type=submit]:hover {
			background-color: #3e8e41;
		}
	</style>
</head>
<body>
	<div class="container">
		<h1>CDS Dashboard</h1>
		<button id="view-btn">View Opportunities</button>
		<button id="add-btn">Add Opportunities</button>
		<button id="dlt-btn">Delete Opportunities</button>

		<form id="add-form" style="display:none;">
			<label for="opp_id">Opportunity ID:</label>
			<input type="text" id="opp_id" name="opp_id"><br>
			<label for="opp_type">Opportunity Type:</label>
			<input type="text" id="opp_type" name="opp_type"><br>
			<input type="submit" value="Submit">
		</form>
	</div>

    <table id = "view-opportunity-table" style = "display: none;">
        <thead>
          <tr>
            <th>Opportunity ID</th>
            <th>Opportunity Name</th>
          </tr>
        </thead>
        <tbody id="opportunities-list">
          <!-- Populate table rows dynamically with JavaScript -->
        </tbody>
    </table>
	<script>
		// Define API endpoints
		const API_URL = 'http://example.com/api';
		const OPPORTUNITIES_URL = `api/opportunities`;
		const CDS_OPPORTUNITY_URL = `api/cds/opportunity`;

		// Get button elements
		const viewBtn = document.getElementById('view-btn');
		const addBtn = document.getElementById('add-btn');

		// Add event listeners to buttons
		viewBtn.addEventListener('click', viewOpportunities);
		addBtn.addEventListener('click', showAddForm);

		// Function to handle view opportunities button click
		function viewOpportunities() {
            $('#view-opportunity-table').show();

            fetch('api/opportunities')
            .then((response) => response.json())
            .then((data) => {
            // Populate the table rows dynamically with the JSON data
            const opportunitiesList = document.getElementById('opportunities-list');
            data.forEach((opportunity) => {
                const row = `
                <tr>
                    <td>${opportunity.opportunityID}</td>
                    <td>${opportunity.opportunityName}</td>
                    <td><button onclick="showMore('${opportunity.opportunityID}')">Show More</button></td>
                </tr>
                `;
                opportunitiesList.insertAdjacentHTML('beforeend', row);
            });
            })
            .catch((error) => console.error(error));
		}


		// Function to handle add opportunities button click
		function showAddForm() {
			// Hide view opportunities button
			viewBtn.style.display = 'none';

			// Show add opportunities form
			addForm.style.display = 'block';

			// Add event listener to add form submit
			addForm.addEventListener
                         ('submit', addOpportunity);
}
	// Function to handle add form submit
	function addOpportunity(event) {
		event.preventDefault();

		const oppId = document.getElementById('opp_id').value;
		const oppType = document.getElementById('opp_type').value;

		const requestOptions = {
			method: 'POST',
			headers: { 'Content-Type': 'application/json' },
			body: JSON.stringify({ opp_id: oppId, opp_type: oppType })
		};

		fetch(CDS_OPPORTUNITY_URL, requestOptions)
			.then(response => response.json())
			.then(data => console.log(data))
			.catch(error => console.error(error));
	}
</script>