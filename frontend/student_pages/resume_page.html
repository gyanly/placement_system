<!DOCTYPE html>
<html>
<head>
	<title>Student Resumes</title>
	<!-- Add Bootstrap CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
<body>
	<div class="container">
		<h1>Student Resumes</h1>
		<form id="add-resume-form">
			<div class="form-group">
				<label for="resume-name">Resume Name:</label>
				<input type="text" class="form-control" id="resume-name" placeholder="Enter resume name">
			</div>
			<div class="form-group">
				<label for="resume-link">Resume Link:</label>
				<input type="text" class="form-control" id="resume-link" placeholder="Enter resume link">
			</div>
			<button type="submit" class="btn btn-primary">Add Resume</button>
		</form>
		<hr>
		<h2>Existing Resumes:</h2>
		<ul id="resume-list"></ul>
	</div>

	<!-- Add jQuery and Bootstrap JS -->
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/XfQnJ7Hpw1QUp8U" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	<script>
		// Submit form data to API endpoint on form submit
		$('#add-resume-form').submit(function(event) {
			event.preventDefault();
			var resumeName = $('#resume-name').val();
			var resumeLink = $('#resume-link').val();
			var data = {'resume_name': resumeName, 'resume_link': resumeLink};
			$.post('api/student/resume', JSON.stringify(data))
			.done(function(response) {
				// Reload list of resumes
				getResumes();
				// Reset form inputs
				$('#resume-name').val('');
				$('#resume-link').val('');
			})
			.fail(function(error) {
				console.error(error);
			});
		});

		// Get list of existing resumes from API endpoint on page load
		$(document).ready(function() {
			getResumes();
		});

		function getResumes() {
			$.get('api/student/resume')
			.done(function(response) {
                // Clear existing list
                $('#resume-list').empty();
                // Add each resume to the list
                response.forEach(function(resume) {
                    var listItem = '<li><strong>' + resume.resume_name + '</strong> (ID: ' + resume.resume_id + ') - <a href="' + resume.resume_link + '">Link</a></li>';
                    $('#resume-list').append(listItem);
                });
            })
            .fail(function(error) {
                console.error(error);
            });
        }
    </script>
</body>
</html>
